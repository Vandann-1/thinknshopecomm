{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ThinknShop{% endblock %}</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
          theme: {
            extend: {
              fontFamily: {
                sans: ['Manrope', 'sans-serif'],
              },
              colors: {
                'primary': {
                  DEFAULT: '#d32f2f',
                  'dark': '#b71c1c',
                },
                'accent': '#ffc107',
                'dark': {
                  'text': '#111111',
                  'medium': '#424242',
                  'light': '#9e9e9e',
                  'bg': '#0a0a0a'
                },
                'off-white': '#f9f9f9',
              }
            }
          }
        }
    </script>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap"
          rel="stylesheet">

    <style>
        body {
            font-family: 'Manrope', 'sans-serif';
            color: #424242;
            overflow-x: hidden;
        }

        .sidebar-scroll::-webkit-scrollbar { width: 4px; }
        .sidebar-scroll::-webkit-scrollbar-track { background: #e5e7eb; }
        .sidebar-scroll::-webkit-scrollbar-thumb {
            background: #9ca3af;
            border-radius: 4px;
        }

        .sidebar-scroll::-webkit-scrollbar-thumb:hover { background: #d32f2f; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>

    {% block head %}{% endblock %}
</head>

<body class="bg-white">

<div>

    <aside id="sidebar"
           class="sidebar-scroll fixed top-0 left-0 z-60 w-64 h-screen bg-white text-gray-900 flex flex-col 
                  transition-transform duration-300 ease-in-out -translate-x-full border-r border-gray-200">

        <div class="flex items-center justify-between p-4 border-b border-gray-200">
            <a href="{% url 'products:home' %}" class="text-2xl font-bold">ThinknShop</a>
            <button id="sidebar-close-btn"
                    class="text-gray-500 hover:text-red-600 text-2xl p-2">&times;</button>
        </div>

        <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
            <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase">Menu</h3>

            <a href="{% url 'products:home' %}"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-home w-6"></i><span class="ml-3 text-sm">Home</span>
            </a>

            <a href="{% url 'products:product-list' %}"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-th-large w-6"></i><span class="ml-3 text-sm">All Products</span>
            </a>

            <a href="{% url 'products:category-list' %}"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-list w-6"></i><span class="ml-3 text-sm">Categories</span>
            </a>

            <h3 class="px-3 pt-4 text-xs font-semibold text-gray-500 uppercase">Account</h3>

            <a href="#" class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-user w-6"></i><span class="ml-3 text-sm">My Profile</span>
            </a>

            <a href="{% url 'my_orders' %}"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-box w-6"></i><span class="ml-3 text-sm">My Orders</span>
            </a>

            <a href="#"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-heart w-6"></i><span class="ml-3 text-sm">Wishlist</span>
            </a>

            <a href="{% url 'manage_address' %}"
               class="flex items-center px-3 py-2.5 rounded-lg hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-map-marker-alt w-6"></i><span class="ml-3 text-sm">Addresses</span>
            </a>
        </nav>

        <div class="p-4 border-t border-gray-200">
            {% if user.is_authenticated %}
            <a href="{% url 'profile'%}" class="flex items-center p-2 rounded-lg hover:bg-red-50">
                <div class="w-10 h-10 rounded-full bg-red-600 text-white flex items-center justify-center">
                    {{ request.user.username|slice:":1"|upper }}
                </div>
                <div class="ml-3">
                    <div class="text-sm font-medium">{{ user.username }}</div>
                    <div class="text-xs text-gray-500">View profile</div>
                </div>
            </a>

            <a href="#"
               class="block mt-2 px-3 py-2.5 rounded-lg text-sm hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-sign-out-alt w-6"></i><span class="ml-3">Sign Out</span>
            </a>
            {% else %}
            <a href="#"
               class="block mt-2 px-3 py-2.5 rounded-lg text-sm hover:bg-red-50 hover:text-red-600">
                <i class="fas fa-sign-in-alt w-6"></i><span class="ml-3">Sign In</span>
            </a>
            {% endif %}
        </div>

    </aside>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black/60 z-55 hidden"></div>

    <div id="main-content" class="relative min-h-screen transition-all">

        <div class="bg-primary text-white text-center py-2 text-xs font-semibold uppercase">
            Free Express Shipping on Orders Over $50 + Free Returns
        </div>

        <header class="bg-white sticky top-0 z-50 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6">

                <div class="flex justify-between items-center py-3 lg:py-5">

                    <button id="sidebar-open-btn"
                            class="p-2 text-gray-700 rounded-md hover:bg-gray-100 hover:text-red-600">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none"
                             viewBox="0 0 24 24" stroke-width="2"
                             stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                  d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
                        </svg>
                    </button>

                    <a href="{% url 'products:home' %}"
                       class="text-2xl sm:text-3xl font-black text-gray-900 tracking-tight">
                        Thinkn<span class="text-red-600">Shop.</span>
                    </a>

                    <div class="flex items-center gap-4">

                        <a href="{% url 'login' %}"
                           class="w-9 h-9 rounded-full bg-gray-100 flex justify-center items-center">
                            <i class="fa fa-user text-gray-700"></i>
                        </a>

                        <a href="#" class="relative">
                            <i class="fa fa-shopping-bag text-2xl text-gray-800"></i>
                            <span class="absolute -top-1 -right-2 bg-red-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
                                {{ cart_item_count|default:0 }}
                            </span>
                        </a>

                    </div>
                </div>

                <div class="block lg:hidden pb-3">
                    <div class="relative">
                        <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input type="text" placeholder="Search..."
                               class="w-full rounded border border-gray-200 bg-gray-50 py-2.5 pl-10">
                    </div>
                </div>

                <div class="hidden lg:block pb-4">
                    <div class="relative max-w-xl mx-auto">
                        <i class="fa fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                        <input type="text" placeholder="Search products..."
                               class="w-full rounded-full border border-gray-200 bg-gray-50 py-3 pl-12">
                    </div>
                </div>

            </div>

            <div class="border-y border-gray-100">
                <div class="max-w-7xl mx-auto px-4">
                    <nav class="flex gap-6 py-3 overflow-x-auto whitespace-nowrap no-scrollbar lg:justify-center">

                        {% for category in featured_categories %}
                        <a href="{{ category.get_absolute_url }}"
                           class="font-semibold text-sm text-gray-600 uppercase hover:text-red-600">
                            {{ category.name }}
                        </a>
                        {% endfor %}

                        {% if sale_products.count > 0 %}
                        <a href="#" class="font-bold text-sm text-red-600 uppercase">Sale</a>
                        {% endif %}
                    </nav>
                </div>
            </div>
        </header>

        <main>
            {% block content %}{% endblock %}
        </main>
        </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        const openBtn = document.getElementById('sidebar-open-btn');
        const closeBtn = document.getElementById('sidebar-close-btn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');

        function openSidebar() {
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
            document.body.style.overflow = ''; // Allow background scrolling
        }

        openBtn?.addEventListener('click', openSidebar);
        closeBtn?.addEventListener('click', closeSidebar);
        overlay?.addEventListener('click', closeSidebar);
    });
</script>

{% block scripts %}{% endblock %}
</body>

</html>